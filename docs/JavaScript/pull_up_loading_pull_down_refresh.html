<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试官：如何实现上拉加载，下拉刷新？ | web-interview</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/interview/favicon.ico">
    <link rel="manifest" href="/interview/manifest.json">
    <link rel="apple-touch-icon" href="/interview/favicon.ico">
    <link rel="mask-icon" href="/interview/favicon.ico" color="#3eaf7c">
    <meta name="description" content="web前端面试,vue面试题,react面试题,js面试题,大厂面试题,阿里面试题,京东面试题">
    <meta name="keywords" content="web前端面试,vue面试题,react面试题,js面试题,大厂面试题,阿里面试题,京东面试题">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="前端面试">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/interview/assets/css/0.styles.ce5ef50a.css" as="style"><link rel="preload" href="/interview/assets/js/app.70e78114.js" as="script"><link rel="preload" href="/interview/assets/js/2.b605f279.js" as="script"><link rel="preload" href="/interview/assets/js/31.f0332993.js" as="script"><link rel="prefetch" href="/interview/assets/js/10.52a25c47.js"><link rel="prefetch" href="/interview/assets/js/100.460f5150.js"><link rel="prefetch" href="/interview/assets/js/101.4b9abf58.js"><link rel="prefetch" href="/interview/assets/js/102.e0ace554.js"><link rel="prefetch" href="/interview/assets/js/103.b508f4f2.js"><link rel="prefetch" href="/interview/assets/js/104.f5298819.js"><link rel="prefetch" href="/interview/assets/js/105.4c8c9d14.js"><link rel="prefetch" href="/interview/assets/js/106.5b63293f.js"><link rel="prefetch" href="/interview/assets/js/107.cc3e4eac.js"><link rel="prefetch" href="/interview/assets/js/108.c9fc5266.js"><link rel="prefetch" href="/interview/assets/js/109.211df063.js"><link rel="prefetch" href="/interview/assets/js/11.5af3edb2.js"><link rel="prefetch" href="/interview/assets/js/110.f4df1f48.js"><link rel="prefetch" href="/interview/assets/js/111.2e20c36a.js"><link rel="prefetch" href="/interview/assets/js/112.1e5c9933.js"><link rel="prefetch" href="/interview/assets/js/113.00f5bc79.js"><link rel="prefetch" href="/interview/assets/js/114.e0040ec9.js"><link rel="prefetch" href="/interview/assets/js/115.1f8c49fd.js"><link rel="prefetch" href="/interview/assets/js/116.6bd9b122.js"><link rel="prefetch" href="/interview/assets/js/117.c0d371e8.js"><link rel="prefetch" href="/interview/assets/js/118.e1495b2f.js"><link rel="prefetch" href="/interview/assets/js/119.82d9b0c8.js"><link rel="prefetch" href="/interview/assets/js/12.e0a79514.js"><link rel="prefetch" href="/interview/assets/js/120.c4aac0b4.js"><link rel="prefetch" href="/interview/assets/js/121.98e77285.js"><link rel="prefetch" href="/interview/assets/js/122.c6c0dd1a.js"><link rel="prefetch" href="/interview/assets/js/123.646c8486.js"><link rel="prefetch" href="/interview/assets/js/124.9f9ea7bc.js"><link rel="prefetch" href="/interview/assets/js/125.f7ee3103.js"><link rel="prefetch" href="/interview/assets/js/126.48201a95.js"><link rel="prefetch" href="/interview/assets/js/127.00355100.js"><link rel="prefetch" href="/interview/assets/js/128.0710304e.js"><link rel="prefetch" href="/interview/assets/js/129.47082a09.js"><link rel="prefetch" href="/interview/assets/js/13.0f0fe96b.js"><link rel="prefetch" href="/interview/assets/js/130.2ff8f3cb.js"><link rel="prefetch" href="/interview/assets/js/131.bbb93c38.js"><link rel="prefetch" href="/interview/assets/js/132.c4329e52.js"><link rel="prefetch" href="/interview/assets/js/133.fc5ecd5c.js"><link rel="prefetch" href="/interview/assets/js/134.666c02f3.js"><link rel="prefetch" href="/interview/assets/js/135.b4e0cb0b.js"><link rel="prefetch" href="/interview/assets/js/136.7b0d035f.js"><link rel="prefetch" href="/interview/assets/js/137.687a9518.js"><link rel="prefetch" href="/interview/assets/js/138.eb3ae602.js"><link rel="prefetch" href="/interview/assets/js/139.f12929db.js"><link rel="prefetch" href="/interview/assets/js/14.237987d9.js"><link rel="prefetch" href="/interview/assets/js/140.6f06ae4d.js"><link rel="prefetch" href="/interview/assets/js/141.874daf56.js"><link rel="prefetch" href="/interview/assets/js/142.a2ad5bc4.js"><link rel="prefetch" href="/interview/assets/js/143.4ef4dde3.js"><link rel="prefetch" href="/interview/assets/js/144.5db7bb3b.js"><link rel="prefetch" href="/interview/assets/js/145.614d8c8a.js"><link rel="prefetch" href="/interview/assets/js/146.89c5a3b0.js"><link rel="prefetch" href="/interview/assets/js/147.f2b66971.js"><link rel="prefetch" href="/interview/assets/js/148.55f5d46d.js"><link rel="prefetch" href="/interview/assets/js/149.c3b9ac26.js"><link rel="prefetch" href="/interview/assets/js/15.d181056c.js"><link rel="prefetch" href="/interview/assets/js/150.1a42a2fc.js"><link rel="prefetch" href="/interview/assets/js/151.338fd8d3.js"><link rel="prefetch" href="/interview/assets/js/152.0f629b10.js"><link rel="prefetch" href="/interview/assets/js/153.0cf4e000.js"><link rel="prefetch" href="/interview/assets/js/154.0aee1f7f.js"><link rel="prefetch" href="/interview/assets/js/155.1da281a8.js"><link rel="prefetch" href="/interview/assets/js/156.0bd54038.js"><link rel="prefetch" href="/interview/assets/js/157.74bb2c01.js"><link rel="prefetch" href="/interview/assets/js/158.d9e5a970.js"><link rel="prefetch" href="/interview/assets/js/159.9f319e39.js"><link rel="prefetch" href="/interview/assets/js/16.2dc9dbb9.js"><link rel="prefetch" href="/interview/assets/js/160.931babe8.js"><link rel="prefetch" href="/interview/assets/js/161.a4e4e807.js"><link rel="prefetch" href="/interview/assets/js/162.cbdc4784.js"><link rel="prefetch" href="/interview/assets/js/163.9635a78c.js"><link rel="prefetch" href="/interview/assets/js/164.db6cce6a.js"><link rel="prefetch" href="/interview/assets/js/165.0986c8c1.js"><link rel="prefetch" href="/interview/assets/js/166.c7a0ce17.js"><link rel="prefetch" href="/interview/assets/js/167.972b188e.js"><link rel="prefetch" href="/interview/assets/js/168.782954bc.js"><link rel="prefetch" href="/interview/assets/js/169.c8b0f610.js"><link rel="prefetch" href="/interview/assets/js/17.215359b4.js"><link rel="prefetch" href="/interview/assets/js/170.f9d38008.js"><link rel="prefetch" href="/interview/assets/js/171.48c1cde4.js"><link rel="prefetch" href="/interview/assets/js/172.bb855560.js"><link rel="prefetch" href="/interview/assets/js/173.c66f5612.js"><link rel="prefetch" href="/interview/assets/js/174.1ab70607.js"><link rel="prefetch" href="/interview/assets/js/175.c775350e.js"><link rel="prefetch" href="/interview/assets/js/176.690a83ea.js"><link rel="prefetch" href="/interview/assets/js/177.72faa87b.js"><link rel="prefetch" href="/interview/assets/js/178.ce5543c3.js"><link rel="prefetch" href="/interview/assets/js/179.6bd6b01d.js"><link rel="prefetch" href="/interview/assets/js/18.2549a407.js"><link rel="prefetch" href="/interview/assets/js/180.6b1104f9.js"><link rel="prefetch" href="/interview/assets/js/181.baed2296.js"><link rel="prefetch" href="/interview/assets/js/182.f3abf168.js"><link rel="prefetch" href="/interview/assets/js/183.475c99d6.js"><link rel="prefetch" href="/interview/assets/js/184.d434f0ee.js"><link rel="prefetch" href="/interview/assets/js/185.7cddd8f3.js"><link rel="prefetch" href="/interview/assets/js/186.b5d93f75.js"><link rel="prefetch" href="/interview/assets/js/187.a7a12f10.js"><link rel="prefetch" href="/interview/assets/js/188.e3cfe886.js"><link rel="prefetch" href="/interview/assets/js/189.f44fa791.js"><link rel="prefetch" href="/interview/assets/js/19.77f25db7.js"><link rel="prefetch" href="/interview/assets/js/190.0c400e8f.js"><link rel="prefetch" href="/interview/assets/js/191.8fe10925.js"><link rel="prefetch" href="/interview/assets/js/192.0b95d6e8.js"><link rel="prefetch" href="/interview/assets/js/193.a492163d.js"><link rel="prefetch" href="/interview/assets/js/194.1ca32437.js"><link rel="prefetch" href="/interview/assets/js/195.912b4e6a.js"><link rel="prefetch" href="/interview/assets/js/196.c7b33df7.js"><link rel="prefetch" href="/interview/assets/js/197.03f4ed20.js"><link rel="prefetch" href="/interview/assets/js/198.2f48a355.js"><link rel="prefetch" href="/interview/assets/js/199.2d7ea60e.js"><link rel="prefetch" href="/interview/assets/js/20.2953a907.js"><link rel="prefetch" href="/interview/assets/js/200.d19800d7.js"><link rel="prefetch" href="/interview/assets/js/201.54214fb2.js"><link rel="prefetch" href="/interview/assets/js/202.c5457106.js"><link rel="prefetch" href="/interview/assets/js/203.de5b1e9f.js"><link rel="prefetch" href="/interview/assets/js/204.b35ac2ee.js"><link rel="prefetch" href="/interview/assets/js/205.ada40fe8.js"><link rel="prefetch" href="/interview/assets/js/206.3ad99b06.js"><link rel="prefetch" href="/interview/assets/js/207.7c432ae9.js"><link rel="prefetch" href="/interview/assets/js/208.7d5c1203.js"><link rel="prefetch" href="/interview/assets/js/209.e1ad20a1.js"><link rel="prefetch" href="/interview/assets/js/21.95bfb217.js"><link rel="prefetch" href="/interview/assets/js/210.e4cd506d.js"><link rel="prefetch" href="/interview/assets/js/211.95dc00ce.js"><link rel="prefetch" href="/interview/assets/js/212.c28fa110.js"><link rel="prefetch" href="/interview/assets/js/213.0c72c2dd.js"><link rel="prefetch" href="/interview/assets/js/214.52a50e60.js"><link rel="prefetch" href="/interview/assets/js/215.726961a1.js"><link rel="prefetch" href="/interview/assets/js/216.a211cca4.js"><link rel="prefetch" href="/interview/assets/js/217.13409179.js"><link rel="prefetch" href="/interview/assets/js/218.5fae3f18.js"><link rel="prefetch" href="/interview/assets/js/219.462e62a8.js"><link rel="prefetch" href="/interview/assets/js/22.1c9fc05e.js"><link rel="prefetch" href="/interview/assets/js/220.eed17f3e.js"><link rel="prefetch" href="/interview/assets/js/221.422abc9e.js"><link rel="prefetch" href="/interview/assets/js/222.235262c0.js"><link rel="prefetch" href="/interview/assets/js/223.fa7b1fd3.js"><link rel="prefetch" href="/interview/assets/js/224.0f1c12a2.js"><link rel="prefetch" href="/interview/assets/js/225.a51c1e8f.js"><link rel="prefetch" href="/interview/assets/js/226.08f4be77.js"><link rel="prefetch" href="/interview/assets/js/227.a5d2b0e9.js"><link rel="prefetch" href="/interview/assets/js/228.edd20db8.js"><link rel="prefetch" href="/interview/assets/js/229.2f7eb3c6.js"><link rel="prefetch" href="/interview/assets/js/23.cd6c99d1.js"><link rel="prefetch" href="/interview/assets/js/230.86415023.js"><link rel="prefetch" href="/interview/assets/js/231.73efbbf8.js"><link rel="prefetch" href="/interview/assets/js/232.f3b17792.js"><link rel="prefetch" href="/interview/assets/js/233.2d7c8985.js"><link rel="prefetch" href="/interview/assets/js/234.465ebdd7.js"><link rel="prefetch" href="/interview/assets/js/235.5b5f3928.js"><link rel="prefetch" href="/interview/assets/js/236.1ee53771.js"><link rel="prefetch" href="/interview/assets/js/237.00cf397f.js"><link rel="prefetch" href="/interview/assets/js/238.31d90e06.js"><link rel="prefetch" href="/interview/assets/js/239.adb25aa0.js"><link rel="prefetch" href="/interview/assets/js/24.b48953d7.js"><link rel="prefetch" href="/interview/assets/js/240.1ec83a93.js"><link rel="prefetch" href="/interview/assets/js/241.7020f804.js"><link rel="prefetch" href="/interview/assets/js/242.bbc90a75.js"><link rel="prefetch" href="/interview/assets/js/243.17839e04.js"><link rel="prefetch" href="/interview/assets/js/244.0c586a01.js"><link rel="prefetch" href="/interview/assets/js/245.8f483d3f.js"><link rel="prefetch" href="/interview/assets/js/246.99bbde56.js"><link rel="prefetch" href="/interview/assets/js/247.ec5d81ee.js"><link rel="prefetch" href="/interview/assets/js/248.36ebe77b.js"><link rel="prefetch" href="/interview/assets/js/249.9ecc74ba.js"><link rel="prefetch" href="/interview/assets/js/25.e96340a5.js"><link rel="prefetch" href="/interview/assets/js/250.08883b38.js"><link rel="prefetch" href="/interview/assets/js/251.e56e4c42.js"><link rel="prefetch" href="/interview/assets/js/252.cc1dc5b9.js"><link rel="prefetch" href="/interview/assets/js/253.6dce43f3.js"><link rel="prefetch" href="/interview/assets/js/254.d202f66d.js"><link rel="prefetch" href="/interview/assets/js/255.135a318f.js"><link rel="prefetch" href="/interview/assets/js/256.96c28fde.js"><link rel="prefetch" href="/interview/assets/js/257.97cf523f.js"><link rel="prefetch" href="/interview/assets/js/258.5a1d14da.js"><link rel="prefetch" href="/interview/assets/js/259.7bc4f066.js"><link rel="prefetch" href="/interview/assets/js/26.e9ccef10.js"><link rel="prefetch" href="/interview/assets/js/260.93030c34.js"><link rel="prefetch" href="/interview/assets/js/261.c628e550.js"><link rel="prefetch" href="/interview/assets/js/262.616b6cc2.js"><link rel="prefetch" href="/interview/assets/js/263.ab0745b8.js"><link rel="prefetch" href="/interview/assets/js/264.76de7106.js"><link rel="prefetch" href="/interview/assets/js/265.65cf59ef.js"><link rel="prefetch" href="/interview/assets/js/266.905a936f.js"><link rel="prefetch" href="/interview/assets/js/267.574bbacd.js"><link rel="prefetch" href="/interview/assets/js/268.baed4db9.js"><link rel="prefetch" href="/interview/assets/js/269.039a3e32.js"><link rel="prefetch" href="/interview/assets/js/27.fa6f3bc2.js"><link rel="prefetch" href="/interview/assets/js/270.5a9ce924.js"><link rel="prefetch" href="/interview/assets/js/271.5f47d822.js"><link rel="prefetch" href="/interview/assets/js/272.19076c40.js"><link rel="prefetch" href="/interview/assets/js/273.bbe8a6c6.js"><link rel="prefetch" href="/interview/assets/js/274.a90d05b1.js"><link rel="prefetch" href="/interview/assets/js/275.570444aa.js"><link rel="prefetch" href="/interview/assets/js/276.55c33a37.js"><link rel="prefetch" href="/interview/assets/js/277.34453e07.js"><link rel="prefetch" href="/interview/assets/js/278.4a4b7797.js"><link rel="prefetch" href="/interview/assets/js/279.542f9201.js"><link rel="prefetch" href="/interview/assets/js/28.5c439f0f.js"><link rel="prefetch" href="/interview/assets/js/29.29c77467.js"><link rel="prefetch" href="/interview/assets/js/3.a02e6494.js"><link rel="prefetch" href="/interview/assets/js/30.e0d5b968.js"><link rel="prefetch" href="/interview/assets/js/32.fbf732bb.js"><link rel="prefetch" href="/interview/assets/js/33.21886cb7.js"><link rel="prefetch" href="/interview/assets/js/34.b12d7731.js"><link rel="prefetch" href="/interview/assets/js/35.1d6fc84d.js"><link rel="prefetch" href="/interview/assets/js/36.127424f0.js"><link rel="prefetch" href="/interview/assets/js/37.0e8638c9.js"><link rel="prefetch" href="/interview/assets/js/38.b37ff113.js"><link rel="prefetch" href="/interview/assets/js/39.36fdfe34.js"><link rel="prefetch" href="/interview/assets/js/4.df3e21a4.js"><link rel="prefetch" href="/interview/assets/js/40.27020e97.js"><link rel="prefetch" href="/interview/assets/js/41.fca84f65.js"><link rel="prefetch" href="/interview/assets/js/42.a96e655f.js"><link rel="prefetch" href="/interview/assets/js/43.fae0b420.js"><link rel="prefetch" href="/interview/assets/js/44.69220c72.js"><link rel="prefetch" href="/interview/assets/js/45.e67f0c7d.js"><link rel="prefetch" href="/interview/assets/js/46.c6798511.js"><link rel="prefetch" href="/interview/assets/js/47.3a981c8e.js"><link rel="prefetch" href="/interview/assets/js/48.6486282d.js"><link rel="prefetch" href="/interview/assets/js/49.c66b3e35.js"><link rel="prefetch" href="/interview/assets/js/5.08c90671.js"><link rel="prefetch" href="/interview/assets/js/50.391b0ef6.js"><link rel="prefetch" href="/interview/assets/js/51.cf08c5bd.js"><link rel="prefetch" href="/interview/assets/js/52.1a6d6759.js"><link rel="prefetch" href="/interview/assets/js/53.f90fad5b.js"><link rel="prefetch" href="/interview/assets/js/54.4f5f46e5.js"><link rel="prefetch" href="/interview/assets/js/55.b97a8410.js"><link rel="prefetch" href="/interview/assets/js/56.1aabc060.js"><link rel="prefetch" href="/interview/assets/js/57.2f5e9249.js"><link rel="prefetch" href="/interview/assets/js/58.77ba7a40.js"><link rel="prefetch" href="/interview/assets/js/59.e88bd17f.js"><link rel="prefetch" href="/interview/assets/js/6.206ca9f4.js"><link rel="prefetch" href="/interview/assets/js/60.acfe5ab9.js"><link rel="prefetch" href="/interview/assets/js/61.c80b3ed1.js"><link rel="prefetch" href="/interview/assets/js/62.9d0ff7f5.js"><link rel="prefetch" href="/interview/assets/js/63.832f8d2e.js"><link rel="prefetch" href="/interview/assets/js/64.d0882465.js"><link rel="prefetch" href="/interview/assets/js/65.84f3e698.js"><link rel="prefetch" href="/interview/assets/js/66.95d2c7aa.js"><link rel="prefetch" href="/interview/assets/js/67.60f8ac70.js"><link rel="prefetch" href="/interview/assets/js/68.5085fc56.js"><link rel="prefetch" href="/interview/assets/js/69.d1d5a6e2.js"><link rel="prefetch" href="/interview/assets/js/7.ba0eecfa.js"><link rel="prefetch" href="/interview/assets/js/70.47d9f1c7.js"><link rel="prefetch" href="/interview/assets/js/71.f6a33d93.js"><link rel="prefetch" href="/interview/assets/js/72.0b747a8f.js"><link rel="prefetch" href="/interview/assets/js/73.26b1757f.js"><link rel="prefetch" href="/interview/assets/js/74.18b8fb6c.js"><link rel="prefetch" href="/interview/assets/js/75.5a47bdea.js"><link rel="prefetch" href="/interview/assets/js/76.dfeb2f7f.js"><link rel="prefetch" href="/interview/assets/js/77.b6958a0f.js"><link rel="prefetch" href="/interview/assets/js/78.47c209ae.js"><link rel="prefetch" href="/interview/assets/js/79.c3f36630.js"><link rel="prefetch" href="/interview/assets/js/8.ae2624da.js"><link rel="prefetch" href="/interview/assets/js/80.49d59a1a.js"><link rel="prefetch" href="/interview/assets/js/81.5c0e3a0b.js"><link rel="prefetch" href="/interview/assets/js/82.28570313.js"><link rel="prefetch" href="/interview/assets/js/83.e4f6f983.js"><link rel="prefetch" href="/interview/assets/js/84.0b0354e0.js"><link rel="prefetch" href="/interview/assets/js/85.51bce980.js"><link rel="prefetch" href="/interview/assets/js/86.96ab8846.js"><link rel="prefetch" href="/interview/assets/js/87.37e7d1f4.js"><link rel="prefetch" href="/interview/assets/js/88.006389c0.js"><link rel="prefetch" href="/interview/assets/js/89.2fde4d1a.js"><link rel="prefetch" href="/interview/assets/js/9.d68d0c7f.js"><link rel="prefetch" href="/interview/assets/js/90.a3cd7c0a.js"><link rel="prefetch" href="/interview/assets/js/91.b4c14cb7.js"><link rel="prefetch" href="/interview/assets/js/92.bb74fd1b.js"><link rel="prefetch" href="/interview/assets/js/93.4ba84b89.js"><link rel="prefetch" href="/interview/assets/js/94.65202783.js"><link rel="prefetch" href="/interview/assets/js/95.9c80d95c.js"><link rel="prefetch" href="/interview/assets/js/96.a737174a.js"><link rel="prefetch" href="/interview/assets/js/97.07021ace.js"><link rel="prefetch" href="/interview/assets/js/98.32853945.js"><link rel="prefetch" href="/interview/assets/js/99.4bcfb58e.js">
    <link rel="stylesheet" href="/interview/assets/css/0.styles.ce5ef50a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/interview/" class="home-link router-link-active"><!----> <span class="site-name">web-interview</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript系列  ( 已完结..)</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/JavaScript/data_type.html" class="sidebar-link">说说JavaScript中的数据类型？存储上的差别？</a></li><li><a href="/interview/JavaScript/array_api.html" class="sidebar-link">数组的常用方法有哪些？</a></li><li><a href="/interview/JavaScript/string_api.html" class="sidebar-link">JavaScript字符串的常用方法有哪些？</a></li><li><a href="/interview/JavaScript/type_conversion.html" class="sidebar-link">谈谈 JavaScript 中的类型转换机制</a></li><li><a href="/interview/JavaScript/== _===.html" class="sidebar-link">== 和 ===区别，分别在什么情况使用</a></li><li><a href="/interview/JavaScript/copy.html" class="sidebar-link">深拷贝浅拷贝的区别？如何实现一个深拷贝？</a></li><li><a href="/interview/JavaScript/closure.html" class="sidebar-link">说说你对闭包的理解？闭包使用场景</a></li><li><a href="/interview/JavaScript/scope.html" class="sidebar-link">说说你对作用域链的理解</a></li><li><a href="/interview/JavaScript/prototype.html" class="sidebar-link">JavaScript原型，原型链 ? 有什么特点？</a></li><li><a href="/interview/JavaScript/inherit.html" class="sidebar-link">Javascript如何实现继承？</a></li><li><a href="/interview/JavaScript/this.html" class="sidebar-link">谈谈this对象的理解</a></li><li><a href="/interview/JavaScript/context_stack.html" class="sidebar-link">JavaScript中执行上下文和执行栈是什么？</a></li><li><a href="/interview/JavaScript/event_Model.html" class="sidebar-link">说说JavaScript中的事件模型</a></li><li><a href="/interview/JavaScript/typeof_instanceof.html" class="sidebar-link">typeof 与 instanceof 区别</a></li><li><a href="/interview/JavaScript/event_agent.html" class="sidebar-link">解释下什么是事件代理？应用场景？</a></li><li><a href="/interview/JavaScript/new.html" class="sidebar-link">说说new操作符具体干了什么？</a></li><li><a href="/interview/JavaScript/ajax.html" class="sidebar-link">ajax原理是什么？如何实现？</a></li><li><a href="/interview/JavaScript/bind_call_apply.html" class="sidebar-link">bind、call、apply 区别？如何实现一个bind?</a></li><li><a href="/interview/JavaScript/regexp.html" class="sidebar-link">说说你对正则表达式的理解？应用场景？</a></li><li><a href="/interview/JavaScript/event_loop.html" class="sidebar-link">说说你对事件循环的理解</a></li><li><a href="/interview/JavaScript/Dom.html" class="sidebar-link">DOM常见的操作有哪些？</a></li><li><a href="/interview/JavaScript/BOM.html" class="sidebar-link">说说你对BOM的理解，常见的BOM对象你了解哪些？</a></li><li><a href="/interview/JavaScript/tail_recursion.html" class="sidebar-link">举例说明你对尾递归的理解，有哪些应用场景</a></li><li><a href="/interview/JavaScript/memory_leak.html" class="sidebar-link">说说 JavaScript 中内存泄漏的几种情况？</a></li><li><a href="/interview/JavaScript/cache.html" class="sidebar-link">Javascript本地存储的方式有哪些？区别及应用场景？</a></li><li><a href="/interview/JavaScript/functional_programming.html" class="sidebar-link">说说你对函数式编程的理解？优缺点？</a></li><li><a href="/interview/JavaScript/function_cache.html" class="sidebar-link">Javascript中如何实现函数缓存？函数缓存有哪些应用场景？</a></li><li><a href="/interview/JavaScript/loss_accuracy.html" class="sidebar-link">说说 Javascript 数字精度丢失的问题，如何解决？</a></li><li><a href="/interview/JavaScript/debounce_throttle.html" class="sidebar-link">什么是防抖和节流？有什么区别？如何实现？</a></li><li><a href="/interview/JavaScript/visible.html" class="sidebar-link">如何判断一个元素是否在可视区域中？</a></li><li><a href="/interview/JavaScript/continue_to_upload.html" class="sidebar-link">大文件上传如何做断点续传？</a></li><li><a href="/interview/JavaScript/pull_up_loading_pull_down_refresh.html" aria-current="page" class="active sidebar-link">如何实现上拉加载，下拉刷新？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/JavaScript/pull_up_loading_pull_down_refresh.html#一、前言" class="sidebar-link">一、前言</a></li><li class="sidebar-sub-header"><a href="/interview/JavaScript/pull_up_loading_pull_down_refresh.html#二、实现原理" class="sidebar-link">二、实现原理</a></li><li class="sidebar-sub-header"><a href="/interview/JavaScript/pull_up_loading_pull_down_refresh.html#三、案例" class="sidebar-link">三、案例</a></li><li class="sidebar-sub-header"><a href="/interview/JavaScript/pull_up_loading_pull_down_refresh.html#参考文献" class="sidebar-link">参考文献</a></li></ul></li><li><a href="/interview/JavaScript/single_sign.html" class="sidebar-link">什么是单点登录？如何实现？</a></li><li><a href="/interview/JavaScript/security.html" class="sidebar-link">web常见的攻击方式有哪些？如何防御？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NodeJS系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本控制系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript 系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法与数据结构系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序系列  ( 已完结..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式系列  ( 进行中..)</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6-阮一峰</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="面试官-如何实现上拉加载-下拉刷新"><a href="#面试官-如何实现上拉加载-下拉刷新" class="header-anchor">#</a> 面试官：如何实现上拉加载，下拉刷新？</h1> <p><img src="https://static.vue-js.com/89cd1850-8adc-11eb-ab90-d9ae814b240d.png" alt=""></p> <h2 id="一、前言"><a href="#一、前言" class="header-anchor">#</a> 一、前言</h2> <p>下拉刷新和上拉加载这两种交互方式通常出现在移动端中</p> <p>本质上等同于PC网页中的分页，只是交互形式不同</p> <p>开源社区也有很多优秀的解决方案，如<code>iscroll</code>、<code>better-scroll</code>、<code>pulltorefresh.js</code>库等等</p> <p>这些第三方库使用起来非常便捷</p> <p>我们通过原生的方式实现一次上拉加载，下拉刷新，有助于对第三方库有更好的理解与使用</p> <h2 id="二、实现原理"><a href="#二、实现原理" class="header-anchor">#</a> 二、实现原理</h2> <p>上拉加载及下拉刷新都依赖于用户交互</p> <p>最重要的是要理解在什么场景，什么时机下触发交互动作</p> <h3 id="上拉加载"><a href="#上拉加载" class="header-anchor">#</a> 上拉加载</h3> <p>首先可以看一张图</p> <p><img src="https://static.vue-js.com/df498a00-8ae3-11eb-ab90-d9ae814b240d.png" alt=""></p> <p>上拉加载的本质是页面触底，或者快要触底时的动作</p> <p>判断页面触底我们需要先了解一下下面几个属性</p> <ul><li><p><code>scrollTop</code>：滚动视窗的高度距离<code>window</code>顶部的距离，它会随着往上滚动而不断增加，初始值是0，它是一个变化的值</p></li> <li><p><code>clientHeight</code>:它是一个定值，表示屏幕可视区域的高度；</p></li> <li><p><code>scrollHeight</code>：页面不能滚动时也是存在的,此时scrollHeight等于clientHeight。scrollHeight表示<code>body</code>所有元素的总长度(包括body元素自身的padding)</p></li></ul> <p>综上我们得出一个触底公式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>scrollTop <span class="token operator">+</span> clientHeight <span class="token operator">&gt;=</span> scrollHeight
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>简单实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> clientHeight  <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">;</span> <span class="token comment">//浏览器高度</span>
<span class="token keyword">let</span> scrollHeight <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">;</span>
<span class="token keyword">let</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
 
<span class="token keyword">let</span> distance <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>  <span class="token comment">//距离视窗还用50的时候，开始触发；</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>scrollTop <span class="token operator">+</span> clientHeight<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token punctuation">(</span>scrollHeight <span class="token operator">-</span> distance<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;开始加载数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="下拉刷新"><a href="#下拉刷新" class="header-anchor">#</a> 下拉刷新</h3> <p>下拉刷新的本质是页面本身置于顶部时，用户下拉时需要触发的动作</p> <p>关于下拉刷新的原生实现，主要分成三步：</p> <ul><li>监听原生<code>touchstart</code>事件，记录其初始位置的值，<code>e.touches[0].pageY</code>；</li> <li>监听原生<code>touchmove</code>事件，记录并计算当前滑动的位置值与初始位置值的差值，大于<code>0</code>表示向下拉动，并借助CSS3的<code>translateY</code>属性使元素跟随手势向下滑动对应的差值，同时也应设置一个允许滑动的最大值；</li> <li>监听原生<code>touchend</code>事件，若此时元素滑动达到最大值，则触发<code>callback</code>，同时将<code>translateY</code>重设为<code>0</code>，元素回到初始位置</li></ul> <p>举个例子：</p> <p><code>Html</code>结构如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>main<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;refreshText&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;refreshContainer&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">111</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">222</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">333</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">444</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">555</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">...</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>main<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>监听<code>touchstart</code>事件，记录初始的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> _element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'refreshContainer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    _refreshText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.refreshText'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    _startPos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment">// 初始的值</span>
    _transitionHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 移动的距离</span>

_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _startPos <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">;</span> <span class="token comment">// 记录初始位置</span>
    _element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span>
    _element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'transform 0s'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>监听<code>touchmove</code>移动事件，记录滑动差值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// e.touches[0].pageY 当前位置</span>
    _transitionHeight <span class="token operator">=</span> e<span class="token punctuation">.</span>touches<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageY <span class="token operator">-</span> _startPos<span class="token punctuation">;</span> <span class="token comment">// 记录差值</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>_transitionHeight <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> _transitionHeight <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        _refreshText<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'下拉刷新'</span><span class="token punctuation">;</span> 
        _element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'translateY('</span><span class="token operator">+</span>_transitionHeight<span class="token operator">+</span><span class="token string">'px)'</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>_transitionHeight <span class="token operator">&gt;</span> <span class="token number">55</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _refreshText<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'释放更新'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>                
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>最后，就是监听<code>touchend</code>离开的事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transition <span class="token operator">=</span> <span class="token string">'transform 0.5s ease 1s'</span><span class="token punctuation">;</span>
    _element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'translateY(0px)'</span><span class="token punctuation">;</span>
    _refreshText<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'更新中...'</span><span class="token punctuation">;</span>
    <span class="token comment">// todo...</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>从上面可以看到，在下拉到松手的过程中，经历了三个阶段：</p> <ul><li>当前手势滑动位置与初始位置差值大于零时，提示正在进行下拉刷新操作</li> <li>下拉到一定值时，显示松手释放后的操作提示</li> <li>下拉到达设定最大值松手时，执行回调，提示正在进行更新操作</li></ul> <h2 id="三、案例"><a href="#三、案例" class="header-anchor">#</a> 三、案例</h2> <p>在实际开发中，我们更多的是使用第三方库，下面以<code>better-scroll</code>进行举例：</p> <p>HTML结构</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;position-wrapper&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;refresh&quot;</span><span class="token operator">&gt;</span>下拉刷新<span class="token operator">&lt;</span><span class="token operator">/</span>p <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;position-list&quot;</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>列表内容<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;more&quot;</span><span class="token operator">&gt;</span>查看更多<span class="token operator">&lt;</span><span class="token operator">/</span>p <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>实例化上拉下拉插件，通过<code>use</code>来注册插件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> BScroll <span class="token keyword">from</span> <span class="token string">&quot;@better-scroll/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PullDown <span class="token keyword">from</span> <span class="token string">&quot;@better-scroll/pull-down&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PullUp <span class="token keyword">from</span> <span class="token string">'@better-scroll/pull-up'</span><span class="token punctuation">;</span>
BScroll<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>PullDown<span class="token punctuation">)</span><span class="token punctuation">;</span>
BScroll<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>PullUp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>实例化<code>BetterScroll</code>，并传入相关的参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> pageNo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>pageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>dataList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>isMore <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  
<span class="token keyword">var</span> scroll<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token string">&quot;#position-wrapper&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">scrollY</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//垂直方向滚动</span>
    <span class="token literal-property property">click</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//默认会阻止浏览器的原生click事件，如果需要点击，这里要设为true</span>
    <span class="token literal-property property">pullUpLoad</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//上拉加载更多</span>
    <span class="token literal-property property">pullDownRefresh</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">threshold</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token comment">//触发pullingDown事件的位置</span>
        <span class="token literal-property property">stop</span><span class="token operator">:</span><span class="token number">0</span><span class="token comment">//下拉回弹后停留的位置</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监听下拉刷新</span>
scroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pullingDown&quot;</span><span class="token punctuation">,</span>pullingDownHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//监测实时滚动</span>
scroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span>scrollHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//上拉加载更多</span>
scroll<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pullingUp&quot;</span><span class="token punctuation">,</span>pullingUpHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">pullingDownHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    dataList<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    pageNo<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    isMore<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.more&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;查看更多&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">getlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//请求数据</span>
    scroll<span class="token punctuation">.</span><span class="token function">finishPullDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每次下拉结束后，需要执行这个操作</span>
    scroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当滚动区域的dom结构有变化时，需要执行这个操作</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">pullingUpHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isMore<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.more&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;没有更多数据了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scroll<span class="token punctuation">.</span><span class="token function">finishPullUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每次上拉结束后，需要执行这个操作</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    pageNo<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//请求数据</span>
    scroll<span class="token punctuation">.</span><span class="token function">finishPullUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每次上拉结束后，需要执行这个操作</span>
    scroll<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当滚动区域的dom结构有变化时，需要执行这个操作    </span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">scrollHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token operator">&gt;</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.refresh'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;松手开始加载&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.refresh'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;下拉刷新&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getlist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//返回的数据</span>
    <span class="token keyword">let</span> result<span class="token operator">=</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
    dataList<span class="token operator">=</span>dataList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//判断是否已加载完</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>length<span class="token operator">&lt;</span>pageSize<span class="token punctuation">)</span> isMore<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//将dataList渲染到html内容中</span>
<span class="token punctuation">}</span>    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>注意点：</p> <p>使用<code>better-scroll</code>实现下拉刷新、上拉加载时要注意以下几点：</p> <ul><li><code>wrapper</code>里必须只有一个子元素</li> <li>子元素的高度要比<code>wrapper</code>要高</li> <li>使用的时候，要确定<code>DOM</code>元素是否已经生成，必须要等到<code>DOM</code>渲染完成后，再<code>new BScroll()</code></li> <li>滚动区域的<code>DOM</code>元素结构有变化后，需要执行刷新 <code>refresh()</code></li> <li>上拉或者下拉，结束后，需要执行<code>finishPullUp()</code>或者<code>finishPullDown()</code>，否则将不会执行下次操作</li> <li><code>better-scroll</code>，默认会阻止浏览器的原生<code>click</code>事件，如果滚动内容区要添加点击事件，需要在实例化属性里设置<code>click:true</code></li></ul> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <p>下拉刷新、上拉加载原理本身都很简单，真正复杂的是封装过程中，要考虑的兼容性、易用性、性能等诸多细节</p> <h2 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h2> <ul><li>https://segmentfault.com/a/1190000014423308</li> <li>https://github.com/ustbhuangyi/better-scroll</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/JavaScript/continue_to_upload.html" class="prev">
        大文件上传如何做断点续传？
      </a></span> <span class="next"><a href="/interview/JavaScript/single_sign.html">
        什么是单点登录？如何实现？
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/interview/assets/js/app.70e78114.js" defer></script><script src="/interview/assets/js/2.b605f279.js" defer></script><script src="/interview/assets/js/31.f0332993.js" defer></script>
  </body>
</html>
